<html>
<head>
    <link rel="stylesheet" type="text/css" href="regina.css">
    <title>Building Regina on Different Distributions</title>
</head>
<body bgcolor="#FFFFFF" text="#000000"
    link="#0000EE" vlink="#551A8B" alink="#FF0000">

<h1><a name="contents">Building Regina on Different Distributions</a></h1>

<p>
The following sections show how Regina can be built successfully on
various GNU/Linux distributions and other systems.
These suggestions come from past experiences in building debian packages and
RPMs on several different platforms.
</p>
<p>
<table class="contentswrapper" cellspacing=0>
<tbody>
<tr><td valign="top">
    <table class="contents" cellspacing=0><tbody>
    <tr><td><a href="#64bit">64-bit systems (x86_64, amd64)</a></td></tr>
    <tr><td><a href="#debian">Debian GNU/Linux</a></td></tr>
    <tr><td><a href="#fedora">Fedora Core</a></td></tr>
    <tr><td><a href="#fink">Fink on MacOS X</a></td></tr>
    <tr><td><a href="#mandriva">Mandriva Linux</a></td></tr>
    <tr><td><a href="#suse">SuSE Linux</a></td></tr>
    <tr><td><a href="#ubuntu">Ubuntu</a></td></tr>
    <tr><td><a href="#cluster">Cluster environments</a></td></tr>
    <tr><td><a href="index.html">Back to main page ...</a></td></tr>
    </tbody></table>
</td></tr>
</tbody>
</table>
</p>
<p>
As always, it is generally simpler just to download and
install a binary package if you can.  Take a look at the
<a href="http://sourceforge.net/project/showfiles.php?group_id=19698">Regina
download site</a> and see if your distribution is supported.
</p>
<p>
Please also see the page on <a href="source.html">building from sources</a>
for system requirements and a general overview of the build process.
</p>
<p>
If these tips do not work for you, please
<a href="mailto:regina-devel@lists.sourceforge.net">send an email</a>
(including your <tt>config.log</tt> if possible) so that this page
and/or the automatic configuration scripts can be updated to reflect
systems like yours.
</p>

<h2><a name="64bit">64-bit systems (x86_64, amd64)</a></h2>

<p>
If your machine runs a 64-bit version of linux (the <tt>x86_64</tt> or
<tt>amd64</tt> architectures) and you use an RPM-based distribution such
as Fedora, Mandriva or SuSE, you may need to pass the following argument to
the <tt>./configure</tt> script:
</p>
<div class="example"><p>
<tt>example$ ./configure --enable-libsuffix=64</tt>
</p></div>
<p>
This enables <tt>./configure</tt> to find the correct 64-bit development
libraries in <tt>/usr/lib64/</tt>, and also ensures that files are
installed in the correct final location.
</p>
<p>
If you are using a Debian-based distribution such as Debian or Ubuntu,
<b>you should not give this argument</b> since 64-bit Debian places
libraries directly in <tt>/usr/lib/</tt>.
</p>

<h2><a name="debian">Debian GNU/Linux</a></h2>

<p>
The KDE user manuals are kept in a different directory, and so the users'
handbook is sometimes installed where KDE cannot find it.  Try passing
the following additional argument to the <tt>./configure</tt> script:
</p>
<div class="example"><p>
<tt>example$ ./configure kde_htmldir=/usr/share/doc/kde/HTML</tt>
</p></div>

<h2><a name="fedora">Fedora Core</a></h2>

<p>
If the <tt>./configure</tt> script is having trouble locating your
Qt/KDE installation, try the following:
<ul>
<li> Run "<tt>source /etc/profile.d/qt.sh</tt>" if you use a bash-style shell
(such as bash or zsh);</li>
<li> Run "<tt>source /etc/profile.d/qt.csh</tt>" if you use a csh-style shell
(such as csh or tcsh).</li>
</ul>
An example for a bash user is given below:
</p>
<div class="example"><p>
<tt>example$ source /etc/profile.d/qt.sh<br>
example$ ./configure</tt>
</p></div>
<p>
Users running the <tt>x86_64</tt> architecture should also see the
section on <a href="#64bit">64-bit systems</a>.
</p>

<h2><a name="fink">Fink on MacOS X</a></h2>

<p>
Assuming you have installed Fink beneath <tt>/sw</tt>, you may need to
pass the following arguments to <tt>./configure</tt> to ensure that it
can find the Fink libraries:
</p>
<div class="example">
<p>
<tt>example$ ./configure
--with-extra-includes=/sw/include --with-extra-libs=/sw/lib</tt>
</p>
</div>
<p>
In addition, the users' handbook is sometimes installed in the wrong
location, which means the KDE Help Centre cannot find it.  This can be
fixed with the following additional argument:
</p>
<div class="example"><p>
<tt>example$ ./configure
--with-extra-includes=/sw/include --with-extra-libs=/sw/lib
kde_htmldir=/sw/share/doc/kde</tt>
</p></div>

<h2><a name="mandriva">Mandriva Linux</a></h2>

<p>
If the <tt>./configure</tt> script is having trouble locating your
Qt/KDE installation, try the following:
<ul>
<li> Run "<tt>export QTDIR=/usr/lib/qt3/</tt>" if you use a bash-style
shell (such as bash or zsh);</li>
<li> Run "<tt>setenv QTDIR /usr/lib/qt3/</tt>" if you use a csh-style
shell (such as csh or tcsh).</li>
</ul>
An example for a bash user is given below:
</p>
<div class="example"><p>
<tt>example$ export QTDIR=/usr/lib/qt3/<br>
example$ ./configure</tt>
</p></div>
<p>
In addition, Mandriva versions 2009.0 and later store all KDE&nbsp;3 material
beneath <tt>/opt</tt>.  Regina's <tt>./configure</tt> script will notice this
and use <tt>/opt</tt> automatically; however, you might wish to pass
additional arguments to ensure that the non-KDE parts of Regina are
installed in a more standard location.
</p>
<p>
The arguments used by the author to build the Mandriva&nbsp;2009.0
packages include:
</p>
<div class="example"><p>
<tt>example$ ./configure --includedir=/usr/include --mandir=/usr/share/man</tt>
</p></div>
<p>
Finally, users running the <tt>x86_64</tt> architecture should also see the
section on <a href="#64bit">64-bit systems</a>.
</p>

<h2><a name="suse">SuSE Linux</a></h2>

<p>
Because SuSE installs KDE beneath <tt>/opt</tt>, you might need
to pass several arguments to the <tt>./configure</tt> script to ensure that
the KDE parts of Regina are installed where KDE can find them, and
the non-KDE parts of Regina are installed in a more standard location.
</p>
<p>
The arguments used by the author to build the SuSE packages include:
</p>
<div class="example"><p>
<tt>example$ ./configure --prefix=/opt/kde3
--includedir=/usr/include --mandir=/usr/share/man</tt>
</p></div>
<p>
In addition, if you wish to build the MPI utilities (assuming you have
<tt>mpich-devel</tt> installed), you may need the following
additional argument:
</p>
<div class="example"><p>
<tt>example$ ./configure --prefix=/opt/kde3
--includedir=/usr/include --mandir=/usr/share/man
MPICXX=/opt/mpich/ch-p4/bin/mpicxx</tt>
</p></div>
<p>
Users running the <tt>x86_64</tt> architecture should also see the
section on <a href="#64bit">64-bit systems</a>.
</p>
<p>
If you use SuSE 11.0 then you will need to upgrade your <i>boost</i>
and <i>boost-devel</i> packages through SuSE's online update.
This is because the boost packages originally shipped with SuSE&nbsp;11.0
<a href="https://bugzilla.novell.com/show_bug.cgi?id=401964">were broken</a>.
</p>

<h2><a name="ubuntu">Ubuntu</a></h2>

<p>
The KDE user manuals are kept in a different directory, and so the users'
handbook is sometimes installed where KDE cannot find it.  Try passing
the following additional argument to the <tt>./configure</tt> script:
</p>
<div class="example"><p>
<tt>example$ ./configure kde_htmldir=/usr/share/doc/kde/HTML</tt>
</p></div>

<h2><a name="cluster">Cluster environments</a></h2>

<p>
If you plan to use Regina in a high-performance computing environment
such as a university cluster, you may run into several complications with
the build and installation process.
</p>
<h4>Disabling the graphical user interface</h4>
<p>
The simplest issue to deal with is that you will probably <i>not</i> want to
build the graphical user interface.  Indeed, the cluster will probably
not have the KDE development libraries installed, which would normally
cause the <tt>./configure</tt> script to output an error and fail.
You can avoid this by passing the configure argument <tt>--disable-kdeui</tt>:
</p>
<div class="example"><p>
<tt>example$ ./configure --disable-kdeui</tt>
</p></div>
<h4>Installing beneath your home directory</h4>
<p>
The next problem is that you will almost certainly not have root access
to the cluster, which means you will need to install Regina beneath your
home directory.  You do this by creating a top-level install directory
(say <tt>/home/bab/software</tt>) and then passing it as the install prefix
to the <tt>./configure</tt> script:
</p>
<div class="example"><p>
<tt>example$ ./configure --prefix=/home/bab/software</tt>
</p></div>
<p>
Regina will then install its various components in the subdirectories
<tt>/home/bab/software/bin</tt>,
<tt>/home/bab/software/lib</tt>,
<tt>/home/bab/software/share</tt> and so on.
</p>
<p>
Note that you need to pass an <b>absolute path</b> as your install prefix
(not <tt>~/software</tt> or <tt>../software</tt>, for instance).
It is best if this is <i>not</i> the directory in which
you unpacked Regina's sources, since otherwise you may find it hard to
untangle sources from binaries later on.
</p>
<h4>Finding library dependencies</h4>
<p>
You may find that some of Regina's dependencies (such as
<i>gmp</i>, <i>popt</i>, <i>libxml2</i> or <i>cppunit</i>)
are not installed on the cluster.
The easy solution is to mail the sysadmin and ask her to install these
dependencies for you (remember to ask for the development files, not
just the runtime libraries).  However, this is not always an option.  In
this case you will need to install the dependencies beneath your
home directory.  This involves two steps:
</p>
<ul>
<li><p>Build and install the dependencies, using the same prefix as before.
For instance, if you are building <i>popt</i> then pass your prefix to
the <i>popt</i> configure script:</p>
<div class="example"><p>
<tt>example:~/sources/popt-1.7$ ./configure --prefix=/home/bab/software</tt>
</p></div>
<p>
You should now find the dependencies installed across
<tt>/home/bab/software/lib</tt>,
<tt>/home/bab/software/include</tt> and so on.
</p>
</li>
<li><p>Tell Regina where to find this software.  For generic libraries
this involves passing the configure arguments
<tt>--with-extra-libs</tt> and <tt>--with-extra-includes</tt>,
giving the <tt>lib</tt> and <tt>include</tt> subdirectories of your
prefix:
</p>
<div class="example"><p>
<tt>example:~/sources/regina-4.6$ ./configure
--with-extra-libs=/home/bab/software/lib
--with-extra-includes=/home/bab/software/include</tt>
</p></div>
<p>Some specific libraries (specifically <i>libxml2</i> and
<i>cppunit</i>) have their own configure arguments, which take the
prefix instead (not its subdirectories):
</p>
<div class="example"><p>
<tt>example:~/sources/regina-4.6$ ./configure
--with-xml-prefix=/home/bab/software
--with-cppunit-prefix=/home/bab/software</tt>
</p></div></li>
</ul>
<p>
For reference, the full configure line used by the author to build
Regina on the <a href="http://www.vpac.org/">VPAC clusters</a> is:
</p>
<div class="example"><p>
<tt>example$ ./configure
--disable-kdeui
--prefix=/home/bab/software
--with-extra-libs=/home/bab/software/lib
--with-extra-includes=/home/bab/software/include
--with-cppunit-prefix=/home/bab/software</tt>
</p></div>
<p>
Depending on the GNU/Linux distribution used on your cluster, it may
also be worth reading other sections of this page
(including the section on <a href="#64bit">64-bit systems</a>).
</p>
<h4>Compiling your own software against Regina</h4>
<p>
Once Regina is built and installed, you may wish to compile it
into your own C++ programs.  The helper script <tt>regina-engine-config</tt>
gives you all of the necessary compiler and linker options for doing this.
You can find this script with the other programs in
<tt><i>prefix</i>/bin</tt>, where <tt><i>prefix</i></tt> is your
installation prefix.
</p>
<p>
To obtain a full set of compiler options:
</p>
<div class="example"><p>
<tt>example$ regina-engine-config --cflags</tt>
</p></div>
<p>
To obtain a full set of linker options:
</p>
<div class="example"><p>
<tt>example$ regina-engine-config --libs</tt>
</p></div>
<p>
You can use this script directly on the command-line (or in your
Makefile).  So, for instance, to compile the program <tt>myprog.cpp</tt>
against Regina:
</p>
<div class="example"><p>
<tt>example$ g++ `regina-engine-config --cflags --libs` myprog.cpp
-o myprog</tt>
</p></div>

<p class="return">
<a href="index.html"><img src="return.jpg" alt="Back to main page ..."
    border="0" width="32" height="32" align="middle"></a>
<a href="index.html">Back to main page ...</a></p>

</body>
</html>

